â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ‘ ANIMAL TRACE - STEP 4 VISUAL SUMMARY                â•‘
â•‘                   Phase 1C STEP 4: sync_queue + Phase 2 Ready              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1ï¸âƒ£  BLOCAGE OFFICIALID - Architecture
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          CRÃ‰ATION ANIMAL                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  AnimalScreen                                                            â”‚
â”‚    â†“                                                                     â”‚
â”‚  AnimalProvider.addAnimal()                                             â”‚
â”‚    â†“                                                                     â”‚
â”‚  AnimalRepository.create(animal, farmId)                                â”‚
â”‚    â†“                                                                     â”‚
â”‚  ğŸ” SyncValidator.validateAnimal()                                      â”‚
â”‚    â”œâ”€ if officialNumber == null && blockSyncIfNoOfficialId              â”‚
â”‚    â”‚   âŒ THROW SyncBlockedException                                    â”‚
â”‚    â”‚   â””â”€ Message: "Official ID obligatoire pour synchroniser"         â”‚
â”‚    â”‚                                                                    â”‚
â”‚    â”œâ”€ if dev mode && forceSyncDev:                                      â”‚
â”‚    â”‚   âœ… Continuer (bypass validation)                                â”‚
â”‚    â”‚                                                                    â”‚
â”‚    â””â”€ Validation OK                                                     â”‚
â”‚    â†“                                                                     â”‚
â”‚  AnimalDao.insertAnimal()                                               â”‚
â”‚    â†“ INSERT INTO animals                                                â”‚
â”‚  SQLite (synced=false, lastSyncedAt=null)                               â”‚
â”‚    â†“                                                                     â”‚
â”‚  SyncQueueRepository.enqueueWithValidation()                            â”‚
â”‚    â†“ INSERT INTO sync_queue                                             â”‚
â”‚  âœ… Item ajoutÃ© Ã  queue (entityType='animal', action='insert')          â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2ï¸âƒ£  CONFIGURATION FLAGS - Dev vs Production
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Flag                â”‚ Mode DEV     â”‚ Mode TEST      â”‚ Production       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ isDevelopmentMode   â”‚ âœ… true      â”‚ âœ… true        â”‚ ğŸ”´ false         â”‚
â”‚ blockOfficialId     â”‚ ğŸŸ¢ false     â”‚ ğŸŸ¢ false       â”‚ ğŸ”´ TRUE âœ“        â”‚
â”‚ mockServerMode      â”‚ âœ… true      â”‚ âœ… true        â”‚ ğŸ”´ false         â”‚
â”‚ testMode            â”‚ âœ… true      â”‚ âœ… true        â”‚ ğŸ”´ false         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CrÃ©er sans offID    â”‚ âœ… OK        â”‚ âœ… OK          â”‚ âŒ BLOQUÃ‰        â”‚
â”‚ Items en queue      â”‚ âœ… Enqueued  â”‚ âœ… Enqueued    â”‚ âœ… Enqueued      â”‚
â”‚ Items synced        â”‚ ğŸ¤– Mock      â”‚ ğŸ¤– Mock        â”‚ âœ… REAL API      â”‚
â”‚ Debug Screen        â”‚ âœ… Visible   â”‚ âœ… Visible     â”‚ âŒ Hidden        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3ï¸âƒ£  SYNC QUEUE FLOW - De la crÃ©ation Ã  la synchronisation
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SYNC QUEUE LIFECYCLE                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ğŸ“ CREATED                                                              â”‚
â”‚    â”œâ”€ id: generated UUID                                               â”‚
â”‚    â”œâ”€ farmId: filtered                                                 â”‚
â”‚    â”œâ”€ entityType: 'animal'                                             â”‚
â”‚    â”œâ”€ entityId: animal uuid                                            â”‚
â”‚    â”œâ”€ action: 'insert'/'update'/'delete'                              â”‚
â”‚    â”œâ”€ payload: JSON (encrypted)                                        â”‚
â”‚    â”œâ”€ synced: false                                                    â”‚
â”‚    â””â”€ retryCount: 0                                                    â”‚
â”‚    â†“                                                                     â”‚
â”‚  â³ PENDING (awaiting sync)                                             â”‚
â”‚    â”œâ”€ syncedAt: NULL                                                   â”‚
â”‚    â”œâ”€ Display: "â³ En attente de synchronisation"                       â”‚
â”‚    â””â”€ Peut: sync, retry, delete                                        â”‚
â”‚    â†“                                                                     â”‚
â”‚  ğŸ”„ SYNCING (during sync operation)                                     â”‚
â”‚    â”œâ”€ EnvoyÃ© au serveur                                                â”‚
â”‚    â”œâ”€ Display: "ğŸ”„ Synchronisation..."                                 â”‚
â”‚    â””â”€ Attendant rÃ©ponse API                                            â”‚
â”‚    â†“                                                                     â”‚
â”‚  âœ… SYNCED (success)                                                    â”‚
â”‚    â”œâ”€ syncedAt: NOW()                                                  â”‚
â”‚    â”œâ”€ serverVersion: from API                                          â”‚
â”‚    â”œâ”€ Display: "âœ… SynchronisÃ©"                                        â”‚
â”‚    â””â”€ Eligible cleanup (aprÃ¨s 30j)                                     â”‚
â”‚    â†“                                                                     â”‚
â”‚  ğŸ—‘ï¸  DELETED (cleanup)                                                  â”‚
â”‚    â”œâ”€ SupprimÃ© DB aprÃ¨s 30 jours                                       â”‚
â”‚    â””â”€ Display: N/A (item gone)                                         â”‚
â”‚                                                                          â”‚
â”‚  âŒ FAILED (error path)                                                  â”‚
â”‚    â”œâ”€ retryCount: incremented (max 3)                                  â”‚
â”‚    â”œâ”€ errorMessage: error text                                         â”‚
â”‚    â”œâ”€ Display: "âŒ Erreur sync (tentative N)"                          â”‚
â”‚    â””â”€ Si retries exhausted â†’ STALLED                                   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4ï¸âƒ£  TESTING WITHOUT SERVER - Debug Mode
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DEBUG SYNC SCREEN (DEV ONLY)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ğŸ”´ FAB in corner: "ğŸ› Debug Sync"                                      â”‚
â”‚                                                                          â”‚
â”‚  âš™ï¸  Configuration                                                       â”‚
â”‚  â”œâ”€ isDevelopmentMode: true                                            â”‚
â”‚  â”œâ”€ blockSyncIfNoOfficialId: false                                     â”‚
â”‚  â”œâ”€ mockServerMode: true                                               â”‚
â”‚  â””â”€ testMode: true                                                     â”‚
â”‚                                                                          â”‚
â”‚  ğŸ”„ Test Sync Operations                                                â”‚
â”‚  â”œâ”€ [Simuler Sync RÃ©ussie]                                             â”‚
â”‚  â”‚   â””â”€ Marque tous items: synced=true                                 â”‚
â”‚  â”œâ”€ [Simuler Sync Ã‰chouÃ©e]                                             â”‚
â”‚  â”‚   â””â”€ IncrÃ©mente retryCount, stocke erreur                           â”‚
â”‚  â””â”€ [Inspecter Queue]                                                  â”‚
â”‚      â””â”€ Affiche console: items en attente, retries, erreurs            â”‚
â”‚                                                                          â”‚
â”‚  ğŸ§¹ Queue Management                                                    â”‚
â”‚  â”œâ”€ [Nettoyer (>30j)]                                                  â”‚
â”‚  â”‚   â””â”€ DELETE WHERE synced_at < 30days_ago                            â”‚
â”‚  â””â”€ [Vider Tous (âš ï¸  DANGER)]                                          â”‚
â”‚      â””â”€ DELETE ALL (confirmation dialog)                               â”‚
â”‚                                                                          â”‚
â”‚  ğŸ“Š Status                                                              â”‚
â”‚  â””â”€ Pending Items: N                                                   â”‚
â”‚     â”œâ”€ 0 items: ğŸŸ¢ OK (vert)                                           â”‚
â”‚     â””â”€ N items: ğŸŸ  WARNING (orange)                                    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5ï¸âƒ£  CLEANUP QUEUE - Settings UI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Settings â†’ Sync Tab (visible prod + dev)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ğŸ”’ Bloquer Sync sans Official ID                                       â”‚
â”‚  â””â”€ [Toggle] ActivÃ© en production                                      â”‚
â”‚                                                                          â”‚
â”‚  ğŸ“Š Queue Status                                                        â”‚
â”‚  â”œâ”€ Pending items: 42 â³                                                â”‚
â”‚  â””â”€ âš ï¸  En attente de synchronisation                                   â”‚
â”‚                                                                          â”‚
â”‚  ğŸ§¹ Maintenance Queue                                                   â”‚
â”‚  â”œâ”€ [ğŸ§¹ Nettoyer (items > 30 jours)]                                   â”‚
â”‚  â”‚   â””â”€ Supprime: items synced > 30j ago                               â”‚
â”‚  â”‚      Conserve: items rÃ©cents + pending                              â”‚
â”‚  â”‚                                                                     â”‚
â”‚  â””â”€ [âš ï¸  Vider Tous (DANGER)]                                          â”‚
â”‚      â””â”€ Supprime: TOUS les items (dev only!)                           â”‚
â”‚         Confirmation: "ÃŠtes-vous sÃ»r?"                                 â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6ï¸âƒ£  MULTI-FARM ISOLATION - Critical Architecture
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FARM A (Sheep)            FARM B (Goats)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  Animals:                            Animals:                           â”‚
â”‚  â”œâ”€ Sheep-001 (officialNum: FR-A1)  â”œâ”€ Goat-001 (officialNum: FR-B1)   â”‚
â”‚  â”œâ”€ Sheep-002 (officialNum: FR-A2)  â”œâ”€ Goat-002 (officialNum: FR-B2)   â”‚
â”‚  â””â”€ ...                              â””â”€ ...                             â”‚
â”‚                                                                          â”‚
â”‚  Sync Queue:                         Sync Queue:                        â”‚
â”‚  â”œâ”€ Item 1: Sheep-001 (insert)      â”œâ”€ Item 1: Goat-001 (insert)       â”‚
â”‚  â”œâ”€ Item 2: Sheep-001 (update)      â”œâ”€ Item 2: Goat-001 (treatment)    â”‚
â”‚  â””â”€ ...                              â””â”€ ...                             â”‚
â”‚                                                                          â”‚
â”‚  getPending('farm-A')                getPending('farm-B')               â”‚
â”‚  â””â”€ Retourne SEULEMENT items de      â””â”€ Retourne SEULEMENT items de    â”‚
â”‚     farm-A (WHERE farmId='farm-A')      farm-B (WHERE farmId='farm-B')  â”‚
â”‚                                                                          â”‚
â”‚  ğŸ”’ ISOLATION COMPLÃˆTE - aucun mÃ©lange                                  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7ï¸âƒ£  FILELIST - Documents crÃ©Ã©s pour STEP 4
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ /mnt/user-data/outputs/

â”œâ”€ STEP4_SYNC_QUEUE_COMPLETE_STRATEGY.md â­ 
â”‚  â””â”€ StratÃ©gie COMPLÃˆTE avec checklists dÃ©taillÃ©es
â”‚     â”œâ”€ VÃ©rifications complÃ¨tes
â”‚     â”œâ”€ Blocage officialID + Configuration
â”‚     â”œâ”€ Mode test sans serveur
â”‚     â”œâ”€ Outils cleanup
â”‚     â””â”€ Architecture sync complÃ¨te
â”‚
â”œâ”€ STEP4_EXECUTIVE_SUMMARY.md â­
â”‚  â””â”€ RÃ©sumÃ© ACTIONABLE avec plan exÃ©cution
â”‚     â”œâ”€ Quoi vÃ©rifier (bash commands)
â”‚     â”œâ”€ Quoi implÃ©menter (fichiers)
â”‚     â”œâ”€ Ã‰tapes d'intÃ©gration
â”‚     â”œâ”€ Configuration par env
â”‚     â””â”€ Checklist validation
â”‚
â”œâ”€ STEP4_CODE_SNIPPETS.md â­
â”‚  â””â”€ CODE PRÃŠT Ã€ COPIER-COLLER
â”‚     â”œâ”€ sync_config.dart (8 snippets)
â”‚     â”œâ”€ sync_validator.dart
â”‚     â”œâ”€ sync_queue_repository.dart
â”‚     â”œâ”€ mock_sync_service.dart
â”‚     â”œâ”€ Constants, main.dart, etc.
â”‚     â””â”€ Settings sync tab
â”‚
â”œâ”€ STEP4_RECOMMENDATIONS_IMPORTANT.md â­
â”‚  â””â”€ RECOMMANDATIONS & REMARQUES CRITIQUES
â”‚     â”œâ”€ Observations sur officialID
â”‚     â”œâ”€ Multi-farm isolation
â”‚     â”œâ”€ Dev vs test vs prod
â”‚     â”œâ”€ Retry logic
â”‚     â”œâ”€ Cleanup strategy
â”‚     â”œâ”€ Monitoring
â”‚     â”œâ”€ SÃ©curitÃ©
â”‚     â”œâ”€ Performance
â”‚     â””â”€ FAQ
â”‚
â””â”€ STEP4_VISUAL_SUMMARY.txt (CE FICHIER)
   â””â”€ Diagrammes + Flowcharts visuels

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
8ï¸âƒ£  QUICK START - Pour commencer immÃ©diatement
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

JOUR 1: Setup
  $ 1. CrÃ©er fichiers (snippets)
  $    lib/utils/sync_config.dart
  $    lib/utils/sync_validator.dart
  $    lib/repositories/sync_queue_repository.dart
  $    lib/services/mock_sync_service.dart
  $
  $ 2. Build runner
  $    flutter pub run build_runner build --delete-conflicting-outputs
  $
  $ 3. Test compilation
  $    flutter analyze

JOUR 2: UI + Debug
  $ 1. CrÃ©er DebugSyncScreen
  $ 2. Ajouter FAB debug Ã  main.dart
  $ 3. Ajouter Sync Tab Ã  Settings
  $ 4. Test app
  $    flutter run

JOUR 3: Validation
  $ 1. Tester creation animal avec/sans officialID
  $ 2. Tester mock sync (success + failure)
  $ 3. Tester cleanup queue
  $ 4. Multi-farm tests (si applicable)
  $ 5. Performance tests
  $ âœ… STEP 4 COMPLETE!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
9ï¸âƒ£  SUCCESS CRITERIA - Validation STEP 4
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… INFRASTRUCTURE
   â˜ sync_queue table + DAO existent
   â˜ SyncValidator bloque/autorise officialID
   â˜ SyncConfig avec flags dev/test/prod
   â˜ getUnsynced() + markSynced() partout

âœ… TESTING
   â˜ CrÃ©er animal avec officialID â†’ enqueued âœ…
   â˜ CrÃ©er animal sans officialID â†’ bloquÃ© âœ…
   â˜ Mock sync success â†’ items synced âœ…
   â˜ Mock sync failure â†’ retry âœ…
   â˜ Cleanup queue â†’ items supprimÃ©s âœ…
   â˜ Multi-farm isolation â†’ OK âœ…

âœ… CODE QUALITY
   â˜ flutter analyze = 0 errors
   â˜ No hard-deletes (soft-delete only)
   â˜ FarmId filtering everywhere
   â˜ Performance: queries < 50ms

ğŸ‰ SI TOUS âœ… = PHASE 2 READY!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”Ÿ KEY NUMBERS - Retention & Performance
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RÃ©tention Queue:
  â€¢ SYNCED items:     30 jours (cleanup aprÃ¨s)
  â€¢ PENDING items:    âˆ (jamais supprimer)
  â€¢ FAILED/STALLED:   7 jours (review/quarantine)

Performance Targets:
  â€¢ getPending():     < 50ms
  â€¢ countPending():   < 10ms
  â€¢ markSynced():     < 20ms
  â€¢ DB size:          < 20MB (mock)

Retries:
  â€¢ maxRetries:       3 tentatives
  â€¢ initialDelay:     5000ms (5 sec)
  â€¢ backoff:          exponentiel (5, 10, 20)

Cleanup:
  â€¢ Schedule:         Automatique daily
  â€¢ Manual:           Settings UI + DebugScreen
  â€¢ Force:            Dev only

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ SUPPORT
  
  1. Tous les documents sont dans /mnt/user-data/outputs/
  2. Code snippets sont prÃªts Ã  copier-coller
  3. Checklists = validation complÃ¨te
  4. Recommendations = best practices

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… STEP 4 est complet et prÃªt Ã  implÃ©menter!

Phase 1C: STEP 4 âœ… â†’ STEP 5 (Mock Data Migration)
           â†“
Phase 2: SyncService (connexion serveur rÃ©elle) ğŸš€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
