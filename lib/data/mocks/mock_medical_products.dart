// lib/data/mocks/mock_medical_products.dart

import '../../models/medical_product.dart';

/// Générateur de produits médicaux enrichis pour les tests
class MockMedicalProducts {
  /// Générer une liste de produits médicaux réalistes
  static List<MedicalProduct> generateProducts() {
    final now = DateTime.now();

    return [
      // ==================== TRAITEMENTS ANTIBIOTIQUES ====================

      MedicalProduct(
        id: 'mp_001',
        farmId: 'mock-farm-001',
        name: 'Amoxicilline 15%',
        commercialName: 'Clamoxyl LA',
        category: 'Antibiotique',
        activeIngredient: 'Amoxicilline',
        manufacturer: 'Zoetis',
        form: 'Injectable',
        dosage: 150.0,
        dosageUnit: 'mg/ml',
        withdrawalPeriodMeat: 28,
        withdrawalPeriodMilk: 96,
        currentStock: 500.0,
        minStock: 100.0,
        stockUnit: 'ml',
        unitPrice: 45.50,
        currency: 'EUR',
        batchNumber: 'AMX2024-11',
        expiryDate: now.add(const Duration(days: 365)),
        storageConditions: 'Conserver entre 2°C et 8°C',
        prescription: 'Ordonnance vétérinaire requise',
        isActive: true,
        // Nouveaux champs
        type: ProductType.treatment,
        targetSpecies: [AnimalSpecies.ovin, AnimalSpecies.bovin, AnimalSpecies.caprin],
        standardCureDays: 5,
        administrationFrequency: '1x/jour',
        dosageFormula: '1ml/10kg',
        defaultAdministrationRoute: 'IM',
        defaultInjectionSite: 'Encolure',
        createdAt: now.subtract(const Duration(days: 60)),
        updatedAt: now.subtract(const Duration(days: 10)),
      ),

      MedicalProduct(
        id: 'mp_002',
        farmId: 'mock-farm-001',
        name: 'Tulathromycine',
        commercialName: 'Draxxin',
        category: 'Antibiotique',
        activeIngredient: 'Tulathromycine',
        manufacturer: 'Zoetis',
        form: 'Injectable',
        dosage: 100.0,
        dosageUnit: 'mg/ml',
        withdrawalPeriodMeat: 22,
        withdrawalPeriodMilk: 0,
        currentStock: 200.0,
        minStock: 50.0,
        stockUnit: 'ml',
        unitPrice: 89.00,
        currency: 'EUR',
        batchNumber: 'DRX2024-08',
        expiryDate: now.add(const Duration(days: 450)),
        storageConditions: 'Conserver entre 15°C et 25°C',
        prescription: 'Ordonnance vétérinaire requise',
        isActive: true,
        type: ProductType.treatment,
        targetSpecies: [AnimalSpecies.bovin, AnimalSpecies.ovin],
        standardCureDays: 1, // Injection unique
        administrationFrequency: 'Unique',
        dosageFormula: '1ml/40kg',
        defaultAdministrationRoute: 'SC',
        defaultInjectionSite: 'Encolure',
        createdAt: now.subtract(const Duration(days: 90)),
        updatedAt: now.subtract(const Duration(days: 5)),
      ),

      MedicalProduct(
        id: 'mp_003',
        farmId: 'mock-farm-001',
        name: 'Pénicilline procaïne',
        commercialName: 'Peni-Kel',
        category: 'Antibiotique',
        activeIngredient: 'Benzylpénicilline procaïne',
        manufacturer: 'Kela',
        form: 'Injectable',
        dosage: 300000.0,
        dosageUnit: 'UI/ml',
        withdrawalPeriodMeat: 10,
        withdrawalPeriodMilk: 72,
        currentStock: 300.0,
        minStock: 100.0,
        stockUnit: 'ml',
        unitPrice: 25.00,
        currency: 'EUR',
        batchNumber: 'PEN2024-10',
        expiryDate: now.add(const Duration(days: 300)),
        storageConditions: 'Conserver entre 2°C et 8°C',
        prescription: 'Ordonnance vétérinaire requise',
        isActive: true,
        type: ProductType.treatment,
        targetSpecies: [AnimalSpecies.ovin, AnimalSpecies.bovin, AnimalSpecies.caprin],
        standardCureDays: 3,
        administrationFrequency: '1x/jour',
        dosageFormula: '1ml/25kg',
        defaultAdministrationRoute: 'IM',
        defaultInjectionSite: 'Cuisse',
        createdAt: now.subtract(const Duration(days: 120)),
        updatedAt: now.subtract(const Duration(days: 15)),
      ),

      // ==================== TRAITEMENTS ANTIPARASITAIRES ====================

      MedicalProduct(
        id: 'mp_004',
        farmId: 'mock-farm-001',
        name: 'Ivermectine 1%',
        commercialName: 'Ivomec',
        category: 'Antiparasitaire',
        activeIngredient: 'Ivermectine',
        manufacturer: 'Boehringer Ingelheim',
        form: 'Injectable',
        dosage: 10.0,
        dosageUnit: 'mg/ml',
        withdrawalPeriodMeat: 35,
        withdrawalPeriodMilk: 0,
        currentStock: 400.0,
        minStock: 100.0,
        stockUnit: 'ml',
        unitPrice: 32.00,
        currency: 'EUR',
        batchNumber: 'IVM2024-09',
        expiryDate: now.add(const Duration(days: 400)),
        storageConditions: 'Conserver à l\'abri de la lumière, entre 15°C et 25°C',
        prescription: 'Ordonnance vétérinaire requise',
        notes: 'Ne pas utiliser chez les femelles laitières',
        isActive: true,
        type: ProductType.treatment,
        targetSpecies: [AnimalSpecies.ovin, AnimalSpecies.bovin, AnimalSpecies.caprin],
        standardCureDays: 1,
        administrationFrequency: 'Unique',
        dosageFormula: '0.2ml/kg',
        defaultAdministrationRoute: 'SC',
        defaultInjectionSite: 'Flanc',
        createdAt: now.subtract(const Duration(days: 100)),
        updatedAt: now.subtract(const Duration(days: 20)),
      ),

      MedicalProduct(
        id: 'mp_005',
        farmId: 'mock-farm-001',
        name: 'Doramectine',
        commercialName: 'Dectomax',
        category: 'Antiparasitaire',
        activeIngredient: 'Doramectine',
        manufacturer: 'Zoetis',
        form: 'Injectable',
        dosage: 10.0,
        dosageUnit: 'mg/ml',
        withdrawalPeriodMeat: 70,
        withdrawalPeriodMilk: 0,
        currentStock: 150.0,
        minStock: 50.0,
        stockUnit: 'ml',
        unitPrice: 52.00,
        currency: 'EUR',
        batchNumber: 'DEC2024-07',
        expiryDate: now.add(const Duration(days: 500)),
        storageConditions: 'Conserver entre 15°C et 25°C',
        prescription: 'Ordonnance vétérinaire requise',
        isActive: true,
        type: ProductType.treatment,
        targetSpecies: [AnimalSpecies.bovin, AnimalSpecies.ovin],
        standardCureDays: 1,
        administrationFrequency: 'Unique',
        dosageFormula: '1ml/33kg',
        defaultAdministrationRoute: 'SC',
        defaultInjectionSite: 'Flanc',
        createdAt: now.subtract(const Duration(days: 75)),
        updatedAt: now.subtract(const Duration(days: 8)),
      ),

      // ==================== VACCINS OVINS ====================

      MedicalProduct(
        id: 'mp_006',
        farmId: 'mock-farm-001',
        name: 'Vaccin Entérotoxémie',
        commercialName: 'Ovilis Toxipra',
        category: 'Vaccin',
        activeIngredient: 'Clostridium perfringens type C et D',
        manufacturer: 'MSD Santé Animale',
        form: 'Injectable',
        dosage: 2.0,
        dosageUnit: 'ml/dose',
        withdrawalPeriodMeat: 0,
        withdrawalPeriodMilk: 0,
        currentStock: 100.0,
        minStock: 20.0,
        stockUnit: 'doses',
        unitPrice: 1.50,
        currency: 'EUR',
        batchNumber: 'OVT2024-06',
        expiryDate: now.add(const Duration(days: 180)),
        storageConditions: 'Conserver entre 2°C et 8°C - NE PAS CONGELER',
        prescription: 'Ordonnance vétérinaire requise',
        notes: 'Bien agiter avant emploi',
        isActive: true,
        type: ProductType.vaccine,
        targetSpecies: [AnimalSpecies.ovin],
        vaccinationProtocol: 'J0+J21+Annuel',
        reminderDays: [21, 365],
        dosageFormula: '2ml/animal',
        defaultAdministrationRoute: 'SC',
        defaultInjectionSite: 'Flanc',
        createdAt: now.subtract(const Duration(days: 150)),
        updatedAt: now.subtract(const Duration(days: 30)),
      ),

      MedicalProduct(
        id: 'mp_007',
        farmId: 'mock-farm-001',
        name: 'Vaccin Border Disease',
        commercialName: 'Bovilis BVD',
        category: 'Vaccin',
        activeIngredient: 'Virus BVD inactivé',
        manufacturer: 'MSD Santé Animale',
        form: 'Injectable',
        dosage: 2.0,
        dosageUnit: 'ml/dose',
        withdrawalPeriodMeat: 0,
        withdrawalPeriodMilk: 0,
        currentStock: 50.0,
        minStock: 20.0,
        stockUnit: 'doses',
        unitPrice: 3.20,
        currency: 'EUR',
        batchNumber: 'BVD2024-05',
        expiryDate: now.add(const Duration(days: 200)),
        storageConditions: 'Conserver entre 2°C et 8°C - NE PAS CONGELER',
        prescription: 'Ordonnance vétérinaire requise',
        notes: 'Vacciner uniquement les animaux sains',
        isActive: true,
        type: ProductType.vaccine,
        targetSpecies: [AnimalSpecies.ovin],
        vaccinationProtocol: 'J0+J21+Annuel',
        reminderDays: [21, 365],
        dosageFormula: '2ml/animal',
        defaultAdministrationRoute: 'IM',
        defaultInjectionSite: 'Encolure',
        createdAt: now.subtract(const Duration(days: 140)),
        updatedAt: now.subtract(const Duration(days: 25)),
      ),

      // ==================== VACCINS BOVINS ====================

      MedicalProduct(
        id: 'mp_008',
        farmId: 'mock-farm-001',
        name: 'Vaccin BVD',
        commercialName: 'Bovilis BVD',
        category: 'Vaccin',
        activeIngredient: 'Virus BVD types 1 et 2',
        manufacturer: 'MSD Santé Animale',
        form: 'Injectable',
        dosage: 2.0,
        dosageUnit: 'ml/dose',
        withdrawalPeriodMeat: 0,
        withdrawalPeriodMilk: 0,
        currentStock: 80.0,
        minStock: 30.0,
        stockUnit: 'doses',
        unitPrice: 4.50,
        currency: 'EUR',
        batchNumber: 'BVB2024-04',
        expiryDate: now.add(const Duration(days: 220)),
        storageConditions: 'Conserver entre 2°C et 8°C - NE PAS CONGELER',
        prescription: 'Ordonnance vétérinaire requise',
        isActive: true,
        type: ProductType.vaccine,
        targetSpecies: [AnimalSpecies.bovin],
        vaccinationProtocol: 'J0+J28+6mois',
        reminderDays: [28, 180],
        dosageFormula: '2ml/animal',
        defaultAdministrationRoute: 'IM',
        defaultInjectionSite: 'Encolure',
        createdAt: now.subtract(const Duration(days: 130)),
        updatedAt: now.subtract(const Duration(days: 18)),
      ),

      MedicalProduct(
        id: 'mp_009',
        farmId: 'mock-farm-001',
        name: 'Vaccin FCO',
        commercialName: 'Bluevac-8',
        category: 'Vaccin',
        activeIngredient: 'Virus FCO sérotypes 1, 2, 4 et 8',
        manufacturer: 'CZ Vaccines',
        form: 'Injectable',
        dosage: 1.0,
        dosageUnit: 'ml/dose',
        withdrawalPeriodMeat: 0,
        withdrawalPeriodMilk: 0,
        currentStock: 60.0,
        minStock: 20.0,
        stockUnit: 'doses',
        unitPrice: 5.80,
        currency: 'EUR',
        batchNumber: 'FCO2024-03',
        expiryDate: now.add(const Duration(days: 160)),
        storageConditions: 'Conserver entre 2°C et 8°C - NE PAS CONGELER',
        prescription: 'Ordonnance vétérinaire requise',
        notes: 'Programme de vaccination obligatoire selon zone',
        isActive: true,
        type: ProductType.vaccine,
        targetSpecies: [AnimalSpecies.bovin, AnimalSpecies.ovin],
        vaccinationProtocol: 'J0+J21+Annuel',
        reminderDays: [21, 365],
        dosageFormula: '1ml/animal',
        defaultAdministrationRoute: 'SC',
        defaultInjectionSite: 'Encolure',
        createdAt: now.subtract(const Duration(days: 110)),
        updatedAt: now.subtract(const Duration(days: 12)),
      ),

      // ==================== ANTI-INFLAMMATOIRES ====================

      MedicalProduct(
        id: 'mp_010',
        farmId: 'mock-farm-001',
        name: 'Méloxicam',
        commercialName: 'Metacam',
        category: 'Anti-inflammatoire',
        activeIngredient: 'Méloxicam',
        manufacturer: 'Boehringer Ingelheim',
        form: 'Injectable',
        dosage: 20.0,
        dosageUnit: 'mg/ml',
        withdrawalPeriodMeat: 15,
        withdrawalPeriodMilk: 120,
        currentStock: 250.0,
        minStock: 50.0,
        stockUnit: 'ml',
        unitPrice: 38.00,
        currency: 'EUR',
        batchNumber: 'MET2024-02',
        expiryDate: now.add(const Duration(days: 380)),
        storageConditions: 'Conserver entre 15°C et 25°C',
        prescription: 'Ordonnance vétérinaire requise',
        notes: 'AINS - surveiller la fonction rénale',
        isActive: true,
        type: ProductType.treatment,
        targetSpecies: [AnimalSpecies.bovin, AnimalSpecies.ovin, AnimalSpecies.caprin],
        standardCureDays: 3,
        administrationFrequency: '1x/jour',
        dosageFormula: '0.5ml/kg',
        defaultAdministrationRoute: 'SC',
        defaultInjectionSite: 'Encolure',
        createdAt: now.subtract(const Duration(days: 95)),
        updatedAt: now.subtract(const Duration(days: 6)),
      ),

      // ==================== AUTRES TRAITEMENTS ====================

      MedicalProduct(
        id: 'mp_011',
        farmId: 'mock-farm-001',
        name: 'Oxytocine',
        commercialName: 'Oxytocine Sintex',
        category: 'Hormone',
        activeIngredient: 'Oxytocine',
        manufacturer: 'Ceva',
        form: 'Injectable',
        dosage: 10.0,
        dosageUnit: 'UI/ml',
        withdrawalPeriodMeat: 1,
        withdrawalPeriodMilk: 0,
        currentStock: 100.0,
        minStock: 30.0,
        stockUnit: 'ml',
        unitPrice: 12.00,
        currency: 'EUR',
        batchNumber: 'OXY2024-01',
        expiryDate: now.add(const Duration(days: 280)),
        storageConditions: 'Conserver entre 2°C et 8°C',
        prescription: 'Ordonnance vétérinaire requise',
        notes: 'Utiliser uniquement lors de la mise bas',
        isActive: true,
        type: ProductType.treatment,
        targetSpecies: [AnimalSpecies.bovin, AnimalSpecies.ovin, AnimalSpecies.caprin],
        standardCureDays: 1,
        administrationFrequency: 'Unique',
        dosageFormula: '2ml/animal',
        defaultAdministrationRoute: 'IM',
        defaultInjectionSite: 'Cuisse',
        createdAt: now.subtract(const Duration(days: 80)),
        updatedAt: now.subtract(const Duration(days: 4)),
      ),

      MedicalProduct(
        id: 'mp_012',
        farmId: 'mock-farm-001',
        name: 'Calcium injectable',
        commercialName: 'Calcidol',
        category: 'Complément minéral',
        activeIngredient: 'Gluconate de calcium',
        manufacturer: 'Laboratoire TVM',
        form: 'Injectable',
        dosage: 400.0,
        dosageUnit: 'mg/ml',
        withdrawalPeriodMeat: 0,
        withdrawalPeriodMilk: 0,
        currentStock: 500.0,
        minStock: 100.0,
        stockUnit: 'ml',
        unitPrice: 15.00,
        currency: 'EUR',
        batchNumber: 'CAL2024-12',
        expiryDate: now.add(const Duration(days: 420)),
        storageConditions: 'Conserver entre 15°C et 25°C',
        prescription: 'Vente libre',
        notes: 'Prévention et traitement des hypocalcémies',
        isActive: true,
        type: ProductType.treatment,
        targetSpecies: [AnimalSpecies.bovin, AnimalSpecies.ovin, AnimalSpecies.caprin],
        standardCureDays: 1,
        administrationFrequency: 'Unique ou selon besoin',
        dosageFormula: '1ml/10kg',
        defaultAdministrationRoute: 'IV',
        defaultInjectionSite: 'Veine jugulaire',
        createdAt: now.subtract(const Duration(days: 50)),
        updatedAt: now.subtract(const Duration(days: 2)),
      ),
    ];
  }

  /// Obtenir les produits par type
  static List<MedicalProduct> getProductsByType(ProductType type) {
    return generateProducts().where((p) => p.type == type).toList();
  }

  /// Obtenir les produits pour une espèce
  static List<MedicalProduct> getProductsForSpecies(AnimalSpecies species) {
    return generateProducts()
        .where((p) => p.targetSpecies.contains(species))
        .toList();
  }

  /// Obtenir les produits par type et espèce
  static List<MedicalProduct> getProductsByTypeAndSpecies(
    ProductType type,
    AnimalSpecies species,
  ) {
    return generateProducts()
        .where((p) => p.type == type && p.targetSpecies.contains(species))
        .toList();
  }

  /// Obtenir les traitements
  static List<MedicalProduct> getTreatments() {
    return getProductsByType(ProductType.treatment);
  }

  /// Obtenir les vaccins
  static List<MedicalProduct> getVaccines() {
    return getProductsByType(ProductType.vaccine);
  }
}
